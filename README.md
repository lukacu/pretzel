# PreTZel - PTZ tracking

The framework provides the tools to evaluate tracking algorithms on a simulated PTZ camera using omnidirectional (360 degree) videos. It was used to perform experiments for the [AMP benchmark](http://www.vicos.si/Projects/AMP) evaluation.

## Building

 * Requires [OpenCV](https://opencv.org/) (at least 2.4)
 * Requires [TraX](https://github.com/votchallenge/trax) has to be compiled and installed
 * Build with [CMake](http://www.cmake.org/).

## VOT toolkit integration

The PreTZel framework can be used (with some minor adjustments) within the [VOT toolkit](https://github.com/votchallenge/vot-toolkit). The toolkit acts as the evaluation environment that handles high-level aspects of evaluation. For more information see [this page](toolkit).

# Toolchain

The following command-line tools are provided by the framework.

## Converter

Converts equirectangular video to cubemap video. The output video name is the same as the input with appended `_cubemap` suffix and is encoded in H.264 format.

Using: `converter [-f from] [-t to] [-i] [-h] input.avi`

 * `-f from` - reads input video from the given position. Position can be specified as a frame number, percentage, mm:ss:ms or ss:ms.
 * `-t to` - stops reading at given position.
 * `-i` - interactive mode, in this mode the video is displayed and the conversion is only turned on when pressing key C, the video is moved one frame when pressing space and played when pressing key P.
 * `-h` - display help

## Player

Plays cubemap videos generated by converter as 360 degree videos and allows moving around the cube with the mouse. Pressing P toggles video playback, pressing Q exits the program.

## Annotator

Interactive application that enables annotation of 360 degree videos with rectangles for visual tracking using spherical coordinates.

Mouse actions:
 * LMB - enter rectangle or move it
 * LMB + Ctrl - enter rectangle or resize it
 * RMB - pan camera
 * RMB + Ctrl - zoom camera
 * RMB + Shift - center camera to point

Keyboard keys:
 * P - toggle playback
 * SPACE - move one frame
 * left/right A/D - move backward/forward 1 frame
 * up/down W/S - move backward/forward 10 frames
 * N - move to first un-annotated frame in sequence
 * R - recenter camera to annotation
 * R + Ctrl - toggle auto recenter camera
 * R + Shift - recenter camera to origin (reset)
 * C - clear annotation at current frame
 * X - go to the beginning of the video
 * W + Ctrl - save the current state of the annotator
 * S + Ctrl - save the current image to file
 * I - interpolate interval using tracking
 * T - track from current position to next frame
 * M - go to marked frame
 * M + Ctrl - mark current frame
 * M + Shift - clear marked frame
 * Q - exit the annotator

## Simulator

Used to perform visual tracking experiments with different camera trajectories. The simulator uses TraX protocol to communicate with the tracker and renders viewport images on-the-fly.

## Exporter

This tool can be used to export omnidirectional trajectory to a normal VOT-toolkit compatible sequence of images.

# Authors

 * Luka Čehovin Zajc
 * Alan Lukežič
 * Marko Prelevikj

# Citing

If you are using the tool or the [AMP benchmark](http://www.vicos.si/Projects/AMP) in your research, please cite the [following paper](http://openaccess.thecvf.com/content_ICCV_2017/papers/Zajc_Beyond_Standard_Benchmarks_ICCV_2017_paper.pdf) that describes both the framework and the dataset.

```
@incproceedings{cehovin2017beyond,
  title={Beyond standard benchmarks: Parameterizing performance evaluation in visual object tracking},
  author={{\v{C}}ehovin, Luka and Luke{\v{z}}i{\v{c}}, Alan and Leonardis, Ale{\v{s}} and Kristan, Matej},
  booktitle = {The IEEE International Conference on Computer Vision (ICCV)},
  month = {Oct},
  year = {2017}
}
```

# License

Copyright 2017 Luka Cehovin Zajc

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
